/* This is demo and codes are minfed */
"use strict";$(document).ready(function(){function e(){R=new THREE.PerspectiveCamera(Y,G,1,1e3),k=new THREE.Scene;var e=new THREE.Mesh(new THREE.SphereGeometry(500,60,40),new THREE.MeshBasicMaterial({map:q}));e.scale.x=-1,k.add(e),y=new THREE.WebGLRenderer({antialias:!0}),y.setSize(C,F),B.appendChild(y.domElement),R.aspect=window.innerWidth/window.innerHeight,R.updateProjectionMatrix(),n(),y.setPixelRatio(window.devicePixelRatio),y.setSize(window.innerWidth,window.innerHeight),B.addEventListener("mousedown",i,!1),B.addEventListener("mousewheel",u,!1),B.addEventListener("DOMMouseScroll",u,!1),window.addEventListener("resize",t,!1)}function n(){R.projectionMatrix.makePerspective(Y,window.innerWidth/window.innerHeight,1,1100)}function t(){R.aspect=window.innerWidth/window.innerHeight,R.updateProjectionMatrix(),y.setSize(window.innerWidth,window.innerHeight)}function i(e){e.preventDefault(),T=e.clientX,L=e.clientY,P=j,b=X,B.addEventListener("mousemove",r,!1),B.addEventListener("mouseup",c,!1),B.addEventListener("touchstart",a,!1),B.addEventListener("touchmove",o,!1)}function o(e){e.preventDefault();var n=e.touches[0];j-=.2*(n.screenX-S),X-=.2*(n.screenY-W),S=n.screenX,W=n.screenY}function a(e){e.preventDefault();var n=e.touches[0];S=n.screenX,W=n.screenY}function r(e){j=(e.clientX-T)*-.175+P,X=(e.clientY-L)*-.175+b}function c(e){B.removeEventListener("mousemove",r,!1),B.removeEventListener("mouseup",c,!1)}function u(e){e.wheelDeltaY?Y-=.05*e.wheelDeltaY:e.wheelDelta?Y-=.05*e.wheelDelta:e.detail&&(Y+=1*e.detail),(45>Y||Y>90)&&(Y=45>Y?45:90),R.projectionMatrix.makePerspective(Y,window.innerWidth/window.innerHeight,1,1100)}function s(){requestAnimationFrame(s),m()}function d(){function e(){j+=.25,40==n?clearInterval(t):n++}var n=0,t=setInterval(function(){e()},10)}function l(){function e(){j-=.25,40==n?clearInterval(t):n++}var n=0,t=setInterval(function(){e()},10)}function f(){function e(){X+=.25,40==n?clearInterval(t):n++}var n=0,t=setInterval(function(){e()},10)}function w(){function e(){X-=.25,40==n?clearInterval(t):n++}var n=0,t=setInterval(function(){e()},10)}function m(){_===!1&&(j+=.05),X=Math.max(-85,Math.min(85,X)),N=THREE.Math.degToRad(90-X),A=THREE.Math.degToRad(j),R.position.x=100*Math.sin(N)*Math.cos(A),R.position.y=100*Math.cos(N),R.position.z=100*Math.sin(N)*Math.sin(A);var e="x: "+R.position.x;e+="<br/>y: "+R.position.y,e+="<br/>z: "+R.position.z,e+="<br/>fov: "+Y,R.lookAt(k.position),y.render(k,R)}function p(){autoScrol===!1&&(_=!0),$("#elipse_key").click(function(){_=_===!1?!0:!1,m()})}function v(){$("#right_key").on("mousedown touchstart",d),$("#left_key").on("mousedown touchstart",l),$("#down_key").on("mousedown touchstart",f),$("#up_key").on("mousedown touchstart",w)}function h(){$("#zoom_in").on("mousedown touchstart",E),$("#zoom_out").on("mousedown touchstart",M)}function E(){function e(){(45>Y||Y>90)&&(Y=45>Y?45:90),Y-=.25,R.projectionMatrix.makePerspective(Y,window.innerWidth/window.innerHeight,1,1100),40==n?clearInterval(t):n++}var n=0,t=setInterval(function(){e()},10)}function M(){function e(){(45>Y||Y>90)&&(Y=45>Y?45:90),Y+=.25,R.projectionMatrix.makePerspective(Y,window.innerWidth/window.innerHeight,1,1100),40==n?clearInterval(t):n++}var n=0,t=setInterval(function(){e()},10)}function g(){$("#fullscreenPan").bind("touchstart click",function(){$("#panorama").toggleFullScreen(),D=!0}),H()}function H(){$("#panorama").fullScreen(!1),D=!1}function I(){$("#pButton").click(function(){music.paused?(music.play(),pButton.className="",pButton.className="fa fa-volume-up"):(music.pause(),pButton.className="",pButton.className="fa fa-volume-off")})}function x(){$("#panorama").css("height",z+"px")}var R,k,y,T,L,P,b,z,S,W,B=document.getElementById("panorama"),D=!1,Y=70,_=!1,j=0,X=0,N=0,A=0,C=1440,F=860,G=C/F,U=document.getElementById("panoramaImage").src,q=THREE.ImageUtils.loadTexture(U,new THREE.UVMapping,function(){e(),s()});Mousetrap.bind("right",function(){d()}),Mousetrap.bind("left",function(){l()}),Mousetrap.bind("down",function(){f()}),Mousetrap.bind("up",function(){w()}),p(),v(),g(),h(),I(),x(),H()});